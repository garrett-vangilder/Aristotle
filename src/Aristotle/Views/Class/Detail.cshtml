@model Aristotle.ViewModels.DetailClassView
@using Aristotle.Models;

<h3>@Model.Title -> @Model.Subject</h3>

<div class="container">
    <table class="table table-striped table-bordered">
        <thead class="text-center">
            <tr class="text-center">
                <td></td>
                <td>Current Stats</td>
                <td></td>
            </tr>
            <tr>
                <td>Today's Attendance by Percentage</td>
                <td>Average Percentage for Class</td>
                <td>Average Attendance for School</td>
            </tr>
        </thead>
        <tbody class="text-center">
            <tr>
                <td>Dummy Number</td>
                <td>Dummy Number</td>
                <td>Dummy Number</td>

            </tr>
        </tbody>
    </table>
</div>

<div class="container">
    <form asp-action="Update" asp-controller="Attendance">
        <table class="table table-striped table-bordered">
            <thead>
                <tr>
                    <td> 
                    <a asp-controller="Class" asp-action="Update" asp-route-dayAway="1" asp-route-id="@Model.ClassId"> << @DateTime.Today.AddDays(1).DayOfWeek</a></td>
                    <td colspan="2" class="text-center">
                      
                        @DateTime.Today.DayOfWeek <a asp-controller="Attendance" asp-action="Update" asp-route-id="@Model.ClassId"><button class="profileButton btn btn-info">Update Attendance</button></a>
                    </td>
                    <td> <a asp-controller="Class" asp-action="Update"  asp-route-dayAway="-1" asp-route-id="@Model.ClassId">  @DateTime.Today.AddDays(-1).DayOfWeek >> </a></td>

                </tr>
                <tr class="text-center">
                    <td>Last Name</td>
                    <td>First Name</td>
                    <td>Grade</td>
                    <td>Absent</td>
                </tr>
            </thead>
            <tbody>

                @foreach (ClassMember cm in Model.ClassMember)
                {

                    @foreach (Student s in Model.Student)
                    {
                        @if (s.StudentId == cm.StudentId)
                        {
                            <tr class="text-center">
                                <td>@s.LastName</td>
                                <td>@s.FirstName</td>
                                <td>@s.Grade</td>

                                @for (int i = 0; i < Model.Attendance.Count; i++)
                                {
                                    @if (Model.Attendance[i].ClassMemberId == cm.ClassMemberId)
                                    {
                                        <td>
                                            @Html.HiddenFor(x => x.Attendance[i].AttendanceId)
                                            <input type="checkbox" asp-for="Attendance[i].CurrentlyAbsent" class="form-control" />
                                       </td>
                                    }
                                }

                            </tr>
                        }
                    }
                }

                </tbody>
            </table>
        </form>
    </div>
